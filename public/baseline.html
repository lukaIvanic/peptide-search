<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Evaluation Details - Peptide Literature Extractor</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="/static/styles.css?v=2026-02-09" />
		<script src="/static/app_config.js?v=2026-02-10-4"></script>
	</head>
	<body class="theme-synthwave baseline-page min-h-screen flex flex-col">
		<header class="topbar">
			<div class="brand">
				<a href="/baseline" class="flex items-center gap-2 text-slate-400 hover:text-slate-200 mr-3" id="backToOverview">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
					<span class="text-xs">Back</span>
				</a>
				<div class="logo"></div>
				<div>
				<div class="title" id="pageTitle">Evaluation Details</div>
				<div class="subtitle" id="pageSubtitle">Compare expected entities by paper against extraction runs</div>
				</div>
			</div>
			<nav class="nav">
				<a href="/" class="nav-link">Dashboard</a>
				<a href="/entities" class="nav-link">Entity Explorer</a>
				<a href="/baseline" class="nav-link active">Evaluation</a>
				<a href="/help" class="nav-link">Help</a>
			</nav>
		</header>

		<main class="max-w-7xl w-full flex-1 mx-auto px-6 py-6 space-y-6">
			<!-- Batch summary panel (shown when batch selected) -->
			<section id="batchSummary" class="sw-card p-3 hidden">
				<div class="flex flex-wrap items-center gap-4 text-[11px] text-slate-600">
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Batch</span>
						<span id="batchLabel" class="font-semibold"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Model</span>
						<span id="batchModel" class="sw-chip"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Progress</span>
						<span id="batchProgress" class="sw-chip"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Recompute</span>
						<span id="baselineRecomputeStatus" class="sw-chip text-[10px] text-slate-500">Idle</span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Match Rate</span>
						<span id="batchMatchRate" class="sw-chip"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Tokens</span>
						<span id="batchTokens" class="sw-chip"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Time</span>
						<span id="batchTime" class="sw-chip"></span>
					</div>
					<div class="flex items-center gap-2">
						<span class="sw-kicker text-[10px] text-slate-500">Cost</span>
						<span id="batchCost" class="sw-chip"></span>
					</div>
				</div>
			</section>

			<section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
				<div class="sw-card p-4 lg:col-span-1">
					<div class="flex flex-wrap items-start justify-between gap-3 mb-3">
						<div class="space-y-2">
							<div class="flex items-center gap-2">
								<div class="section-title">Papers</div>
								<span id="caseCount" class="sw-chip sw-kicker text-[10px] text-slate-500"></span>
							</div>
							<span id="baselineStatus" class="sw-chip text-[10px] text-slate-500"></span>
						</div>
						<div class="flex items-center gap-2 min-w-[220px] w-full sm:w-auto">
							<input id="caseSearch" type="text" placeholder="Search DOI, sequence, or ID"
								class="sw-input sw-input--sm w-full sm:w-[240px]" />
							<button id="searchBtn" class="sw-btn sw-btn--sm sw-btn--ghost" type="button">
								Search
							</button>
						</div>
					</div>
					<div id="baselineList" class="list list--synth max-h-[70vh] overflow-y-auto"></div>
				</div>

				<div class="lg:col-span-2">
					<div class="sw-card p-4 space-y-3">
						<div class="flex flex-wrap items-center gap-3 text-xs text-slate-600">
							<div class="section-title">Evaluation analysis</div>
							<span id="analysisHint" class="sw-chip text-[10px] text-slate-500">Successful runs in current filter</span>
						</div>
						<div id="baselineAnalysis" class="space-y-3 text-xs text-slate-600">
							<div class="sw-empty text-xs text-slate-500">Loading analysis...</div>
						</div>
					</div>

					<div class="sw-card p-4 space-y-4 mt-4">
						<div class="flex flex-wrap items-center gap-3 text-xs text-slate-600">
							<div class="section-title">Comparison</div>
							<span id="comparisonHint" class="sw-chip text-[10px] text-slate-500">Select a paper, then run with local PDF</span>
						</div>
					<div id="selectedCaseStrip" class="hidden">
						<div class="flex flex-wrap items-center gap-2 text-[11px] text-slate-600">
							<span class="sw-chip sw-kicker text-[10px] text-slate-500">Selected paper</span>
							<span id="selectedCaseSequence" class="font-semibold text-slate-900"></span>
							<span id="selectedCaseDataset" class="sw-chip text-[10px] text-slate-500"></span>
							<span id="selectedCaseMeta" class="text-[10px] text-slate-500"></span>
						</div>
					</div>
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 px-1 text-[10px] uppercase tracking-wide text-slate-400">
							<div>Expected entities</div>
							<div>Extracted entities</div>
						</div>
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-0 border border-slate-200 overflow-hidden divide-y lg:divide-y-0 lg:divide-x divide-slate-200">
							<div class="p-4">
								<div class="section-title mb-2">Expected</div>
								<div id="baselineDetail" class="space-y-3 text-xs text-slate-600"></div>
							</div>
							<div class="p-4">
								<div class="section-title mb-2">Extraction</div>
								<div id="extractionDetail" class="space-y-3 text-xs text-slate-600"></div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>

		<div id="baselineCaseModal" class="fixed inset-0 z-50 hidden">
			<div id="baselineCaseModalBackdrop" class="fixed inset-0 bg-black/50 backdrop-blur-sm"></div>
			<div class="fixed inset-0 flex items-center justify-center p-4">
				<div class="sw-card p-4 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
					<div class="flex items-center justify-between mb-3">
						<div class="section-title" id="baselineCaseModalTitle">Edit Evaluation Case</div>
						<button id="baselineCaseModalClose" class="sw-btn sw-btn--sm sw-btn--ghost" type="button">Close</button>
					</div>
					<form id="baselineCaseForm" class="space-y-3">
						<div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-xs">
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Case ID</span>
								<input id="baselineCaseId" class="sw-input sw-input--sm" />
							</label>
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Dataset</span>
								<input id="baselineCaseDataset" class="sw-input sw-input--sm" />
							</label>
							<label class="md:col-span-2 flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Sequence</span>
								<input id="baselineCaseSequence" class="sw-input sw-input--sm" />
							</label>
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">N-terminal</span>
								<input id="baselineCaseNTerminal" class="sw-input sw-input--sm" />
							</label>
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">C-terminal</span>
								<input id="baselineCaseCTerminal" class="sw-input sw-input--sm" />
							</label>
							<label class="md:col-span-2 flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Labels (comma separated)</span>
								<input id="baselineCaseLabels" class="sw-input sw-input--sm" />
							</label>
							<label class="md:col-span-2 flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">DOI</span>
								<input id="baselineCaseDoi" class="sw-input sw-input--sm" />
							</label>
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">PubMed ID</span>
								<input id="baselineCasePubmedId" class="sw-input sw-input--sm" />
							</label>
							<label class="flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">PDF URL</span>
								<input id="baselineCasePdfUrl" class="sw-input sw-input--sm" />
							</label>
							<label class="md:col-span-2 flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Paper URL</span>
								<input id="baselineCasePaperUrl" class="sw-input sw-input--sm" />
							</label>
							<label class="md:col-span-2 flex flex-col gap-1">
								<span class="sw-kicker text-[10px] text-slate-500">Metadata (JSON object)</span>
								<textarea id="baselineCaseMetadata" class="sw-input sw-input--sm min-h-[96px]"></textarea>
							</label>
							<label class="md:col-span-2 flex items-center gap-2 text-xs">
								<input id="baselineCaseUnverified" type="checkbox" />
								<span>Source unverified</span>
							</label>
						</div>
						<div id="baselineCaseModalError" class="text-xs text-red-500 hidden"></div>
						<div class="flex justify-end gap-2 pt-2">
							<button id="baselineCaseDeleteBtn" class="sw-btn sw-btn--sm sw-btn--ghost text-red-500" type="button">Delete Case</button>
							<button id="baselineCaseSaveBtn" class="sw-btn sw-btn--sm sw-btn--primary" type="submit">Save</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<script type="module" src="/static/baseline.js?v=2026-02-10-3"></script>
	</body>
</html>
